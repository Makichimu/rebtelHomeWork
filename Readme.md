# Rebtel HomeWork

This repository contains the solution for Rebtel HomeWork using **Cypress** for end-to-end (E2E) testing. The tests automate workflows on a banking application, including adding new customers and opening accounts, as outlined in the test specifications.

## Project Structure

``` 
rebtelHomeWork
├── cypress
│   ├── fixtures
│   ├── pages
│   ├── reports
│   ├── support
│   ├── tests
│   │   └── e2e
│   └── utils
├── node_modules
├── cypress.config.jss
├── package-lock.json
├── package.json 
```


 - cypress/: Contains all Cypress-related files.
 - fixtures/: Contains test data files used by Cypress.
 - pages/: Contains page objects for the application under test.
 - reports/: Folder for storing test reports generated by Mochawesome.
 - support/: Support files for Cypress (e.g., custom commands).
 - tests/e2e/: Folder containing the end-to-end tests.
 - utils/: Utility functions used across tests.
 - node_modules/: Directory for installed Node.js dependencies.
 - cypress.config.js: Cypress configuration file.
 - package.json: Node.js package configuration file.
 - package-lock.json: Lock file for dependencies.

 ## Installation

To get started with this project, follow the steps below.

### 1. Clone the repository
```
git clone https://github.com/Makichimu/rebtelHomeWork.git
```

### 2. Install dependencies
```
npm install
```


### 3. Run the tests
```
npm test
```


### Cypress Configuration
The Cypress configuration is located in cypress.config.js. Key settings include:

- `Base URL`: The base URL for the application being tested is set to https://www.globalsqa.com/angularJs-protractor/BankingProject/#/.
- `Test Pattern`: The tests are located in the cypress/tests/e2e/ folder, and all .js, .jsx, .ts, and .tsx files are considered test files.
- `Reporter`: Cypress uses the Mochawesome reporter to generate HTML and JSON reports.
- `Report Directory`: Test results are stored in the cypress/reports folder.

### Example Cypress Test
The tests are organized in cypress/tests/e2e/ and use the Page Object Model to structure the tests.

For example, bankManagerWorkflow.spec.js tests two workflows:

- Add new customer: Adds a customer to the banking system, filling out the necessary details and verifying the customer in the system.
- Open new account: Opens accounts for existing customers, verifying that accounts are created for each test customer with each currency.

## Adding New Tests

If you need to test other pages or workflows, follow these steps:

1. **Create a new Page Object Model (POM)**:
   - Add a new file in the `cypress/pages` folder to represent the page you are testing (e.g., `AccountPage.js`).
   - Define methods for interacting with elements on that page (e.g., buttons, fields).

2. **Add the page to your tests**:
   - In your test file (inside `cypress/tests/e2e`), import the newly created page object.
   - Instantiate the page object and use its methods to perform actions in your tests.

## Working with utils and commands.js
### Utils
The utils folder contains helper functions that can be used across your tests. For example, utils/accountUtils.js includes functions to perform actions like depositing and withdrawing from accounts.

Some example functions:

- `selectAllAccountsAndPerformAction`: Selects all accounts and performs a given action on each account.
- `getUserId`: Retrieves the user ID from localStorage based on the user's first and last name.
- `depositToAccount`: Deposits a specified amount into an account and returns the balance before and after the deposit.
- `withdrawFromAccount`: Withdraws a specified amount from an account and returns the balance before and after the withdrawal.
You can use these functions in your tests like so:
```
javascript
import { depositToAccount } from "../../utils/accountUtils";

describe('Deposit Workflow', function () {
    let accountPage = new AccountPage();

    it('Deposit to an account', function () {
        depositToAccount(accountPage, '12345', 500).then((result) => {
            expect(result.balanceAfter).to.eq(result.balanceBefore + result.depositAmount);
        });
    });
});
```

### Commands (commands.js)
The commands.js file in the cypress/support folder allows you to define custom Cypress commands that can be used in your tests.

For example, commands.js defines several custom commands:

- `loginAsManager`: Logs in as the manager.
- `loginAsCustomer`: Logs in as a customer by selecting their name from the list.
- `loadFixtures`: Loads fixtures (e.g., customers and currencies) for use in your tests.
You can use these commands like this:

```
javascript
describe('Login Tests', function () {
    it('Manager login', function () {
        cy.loginAsManager();
    });

    it('Customer login', function () {
        cy.loginAsCustomer('John Doe');
    });
});
```
To add more custom commands, simply define them in the commands.js file and use them in your tests.

